<div mat-dialog-title>
  <div class="dialog-header">
    <div>
      <h1 i18n="@@dialogChangePasswordHeader">Change Password</h1>
    </div>

    <button
      mat-icon-button
      [mat-dialog-close]="true"
      aria-label="Close"
      i18n-aria-label="@@dialogChangePasswordCloseButton"
    >
      <mat-icon svgIcon="close" />
    </button>
  </div>
</div>

<mat-dialog-content>
  <form [formGroup]="changePasswordForm">
    <mat-form-field>
      <mat-label i18n="@@dialogChangePasswordCurrentPasswordLabel"
        >Current Password</mat-label
      >
      <input matInput type="password" formControlName="currentPassword" />
      @if (changePasswordForm.controls.currentPassword.hasError('required')) {
      <mat-error i18n="@@dialogChangePasswordCurrentPasswordRequiredError">
        Current password required
      </mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label i18n="@@dialogChangePasswordNewPasswordLabel"
        >New Password</mat-label
      >
      <input matInput type="password" formControlName="newPassword" />
      @if (changePasswordForm.controls.newPassword.hasError('required')) {
      <mat-error i18n="@@dialogChangePasswordNewPasswordRequiredError">
        New password required
      </mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label i18n="@@dialogChangePasswordConfirmPasswordLabel"
        >Confirm New Password</mat-label
      >
      <input matInput type="password" formControlName="confirmPassword" />
      @if (changePasswordForm.controls.confirmPassword.hasError('required')) {
      <mat-error i18n="@@dialogChangePasswordConfirmPasswordRequiredError"
        >Confirm new password required</mat-error
      >
      }
    </mat-form-field>
  </form>

  <div class="error-wrapper" aria-live="polite">
    @if (changePasswordForm.hasError('notSame')){
    <div class="error">
      <mat-icon svgIcon="warning" />
      <p i18n="@@dialogChangePasswordDoNotMatchError">Passwords do not match</p>
    </div>
    } @if (changePasswordError) {
    <div class="error">
      <mat-icon svgIcon="warning" />
      <p>{{ changePasswordError }}</p>
    </div>
    }
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button
    (click)="onSubmitChangePassword()"
    mat-flat-button
    color="primary"
    type="submit"
    i18n="@@dialogChangePasswordSubmitButtonLabel"
  >
    Change Password
  </button>
</mat-dialog-actions>
