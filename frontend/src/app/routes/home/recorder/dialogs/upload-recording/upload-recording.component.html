<h2 mat-dialog-title>Upload</h2>
<mat-dialog-content class="mat-dialog-content">
  @if (!uploading) {
  <div>
    <h3>Zusammenfassung</h3>
    <p>Titel: {{ data.title }}</p>
    <p>Sprache: {{ data.language }}</p>
  </div>

  <div>
    @if (readyToUpload) {
    <p class="infotext">
      <mat-icon svgIcon="info"></mat-icon> Alle Daten sind bereit. Du kannst das
      Projekt jetzt hochladen.
    </p>
    }@else{
    <p class="infotext">
      <mat-icon svgIcon="info"></mat-icon> Die Dateien werden verarbeite, bittey
      warte bis alle Dateien fertig sind.
    </p>
    }
  </div>

  } @else {
  <div>
    <h3>Dateien werden hochgeladen.</h3>
    Sobald alle Dateien hochgeladen wurden, taucht das Projekt in der
    Projektübersicht auf.
    <ul class="upload-list">
      @for (recording of data.recordings; track $index) {
      <li>
        <!-- {{ upload.name }} -->
        <mat-progress-bar
          mode="determinate"
          [value]="recording.upload.progress"
        ></mat-progress-bar>
        {{ recording.upload.progress | number : '1.0-0' }}%
        <!-- {{ (fileUpload.loaded / fileUpload.totalSize) * 100 }}% -->
        <!-- <button mat-icon-button (click)="onCancelUpload(fileUpload)">
            <mat-icon svgIcon="close"></mat-icon>
          </button> -->
      </li>
      }
    </ul>

    <div>
      @if (this.uploadingDone) {
      <p class="infotext">
        <mat-icon svgIcon="info"></mat-icon>
        Das Projekt wurde erfolgreich erstellt, du kannst diesen Dialog jetzt
        schließen!
      </p>
      }@else {
      <p class="infotext">
        <mat-icon svgIcon="info"></mat-icon> Bitte warte bis alle Dateien
        hochgeladen wurden.
      </p>
      }
    </div>
  </div>

  }
</mat-dialog-content>

<mat-dialog-actions>
  @if (!uploading) {

  <button color="warn" mat-flat-button (click)="onClose()">
    Verwerfen und schließen
  </button>

  <button
    color="primary"
    mat-flat-button
    [disabled]="!readyToUpload"
    (click)="onUploadRecording()"
  >
    Hochladen und Projekt erstellen
  </button>

  }@else {

  <button
    color="primary"
    mat-flat-button
    [disabled]="!uploadingDone"
    (click)="onClose()"
  >
    Ein weiteres Video aufnehmen
  </button>

  }
</mat-dialog-actions>
