<h2 mat-dialog-title>Add Videosource {{ loading }} - {{ loadingError }}</h2>

<mat-dialog-content class="mat-dialog-content">
  <ng-container *ngIf="loading">
    <div class="flex justify-center" style="margin-top: 20px">
      <mat-spinner></mat-spinner>
    </div>
  </ng-container>

  <ng-container *ngIf="!loading && loadingError">
    <p>
      {{ loadingError }}
    </p>
  </ng-container>

  <ng-container *ngIf="!loading && !loadingError">
    <mat-form-field style="width: 100%">
      <mat-label>sources</mat-label>
      <mat-select
        (selectionChange)="onSelectionChange()"
        [(ngModel)]="currentInput"
      >
        <mat-option *ngFor="let videoInput of videoinputs" [value]="videoInput">
          {{ videoInput.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div class="controls">
      <mat-form-field class="title-form-field">
        <mat-label>Title</mat-label>
        <input matInput type="text" [(ngModel)]="videoSource.title" />
      </mat-form-field>

      <mat-form-field class="category-form-field">
        <mat-label>Media Category</mat-label>
        <mat-select [(ngModel)]="videoSource.mediaCategory">
          <mat-option value="{{ MediaCategory.OTHER }}">Other</mat-option>
          <mat-option value="{{ MediaCategory.SIGN_LANGUAGE }}"
            >Sign Language</mat-option
          >
          <mat-option value="{{ MediaCategory.SLIDES }}">Slides</mat-option>
          <mat-option value="{{ MediaCategory.SPEAKER }}">Speaker</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <br />

    <div *ngIf="videoSource.mediaStream">
      <video [srcObject]="videoSource.mediaStream" autoplay controls></video>
    </div>

    <div
      *ngIf="!videoSource.mediaStream"
      class="flex justify-center"
      style="margin-top: 20px; width: 100%; height: 200px"
    >
      <mat-spinner></mat-spinner>
    </div>
  </ng-container>
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-button (click)="onCloseDialog()">Cancel</button>
  <button
    mat-button
    [disabled]="loading || loadingError"
    (click)="onSubmitDialog()"
  >
    Add
  </button>
</mat-dialog-actions>
