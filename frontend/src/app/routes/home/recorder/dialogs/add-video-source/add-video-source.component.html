<h2 mat-dialog-title>Add Videosource</h2>
<mat-dialog-content class="mat-dialog-content">
  @if (loading) {
  <div class="flex justify-center" style="margin-top: 20px">
    <mat-spinner></mat-spinner>
  </div>
  } @if (!loading && loadingError) {
  <p>
    {{ loadingError }}
  </p>
  } @if (!loading && !loadingError) {
  <mat-form-field style="width: 100%">
    <mat-label>sources</mat-label>
    <mat-select
      (selectionChange)="onSelectionChange()"
      [(ngModel)]="currentInput"
    >
      @for (videoInput of videoinputs; track videoInput) {
      <mat-option [value]="videoInput">
        {{ videoInput.label }}
      </mat-option>
      }
    </mat-select>
  </mat-form-field>
  <div class="controls">
    <mat-form-field class="title-form-field">
      <mat-label>Title</mat-label>
      <input matInput type="text" [(ngModel)]="videoSource.title" />
    </mat-form-field>
    <mat-form-field class="category-form-field">
      <mat-label>Media Category</mat-label>
      <mat-select [(ngModel)]="videoSource.mediaCategory">
        <mat-option value="{{ MediaCategory.OTHER }}">Other</mat-option>
        <mat-option value="{{ MediaCategory.SIGN_LANGUAGE }}"
          >Sign Language</mat-option
        >
        <mat-option value="{{ MediaCategory.SLIDES }}">Slides</mat-option>
        <mat-option value="{{ MediaCategory.SPEAKER }}">Speaker</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <br />
  @if (videoSource.mediaStream) {
  <div>
    <video [srcObject]="videoSource.mediaStream" autoplay controls></video>
  </div>
  } @if (!videoSource.mediaStream) {
  <div
    class="flex justify-center"
    style="margin-top: 20px; width: 100%; height: 200px"
  >
    <mat-spinner></mat-spinner>
  </div>
  } }
</mat-dialog-content>
<mat-dialog-actions>
  <button color="primary" mat-flat-button (click)="onCloseDialog()">
    Cancel
  </button>
  @if (!loadingError && !loading && !loadingError) {
  <button color="primary" mat-flat-button (click)="onSubmitDialog()">
    Add
  </button>
  } @if (loadingError) {
  <button color="primary" mat-flat-button (click)="onClickTryAgain()">
    Erneut versuchen
    <mat-icon svgIcon="repeat" class="svg-black"></mat-icon>
  </button>
  }
</mat-dialog-actions>
