<h2 mat-dialog-title>Add Audiosource</h2>

<mat-dialog-content class="mat-dialog-content">
  <ng-container *ngIf="loading">
    <div class="flex justify-center" style="margin-top: 20px">
      <mat-spinner></mat-spinner>
    </div>
  </ng-container>

  <ng-container *ngIf="loadingError"></ng-container>

  <ng-container *ngIf="!loading && !loadingError">
    <mat-form-field style="width: 100%">
      <mat-label>sources</mat-label>
      <mat-select
        [(ngModel)]="currentInput"
        (selectionChange)="onSelectionChange()"
      >
        <mat-option *ngFor="let audioInput of audioinputs" [value]="audioInput">
          {{ audioInput.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field style="width: 100%">
      <mat-label>Title</mat-label>
      <input matInput type="text" [(ngModel)]="audioSource.title" />
    </mat-form-field>

    <br />

    <div *ngIf="audioSource.mediaStream">
      <audio [srcObject]="audioSource.mediaStream" autoplay controls></audio>
    </div>

    <div
      *ngIf="!audioSource.mediaStream"
      class="flex justify-center"
      style="margin-top: 20px; width: 100%; height: 80px"
    >
      <mat-spinner></mat-spinner>
    </div>
  </ng-container>
</mat-dialog-content>
<mat-dialog-actions>
  <button
    mat-button
    [disabled]="loading || loadingError"
    (click)="onCloseDialog()"
  >
    Cancel
  </button>
  <button mat-button (click)="onSubmitDialog()">Add</button>
</mat-dialog-actions>
